# Copyright The OpenTelemetry Authors
# SPDX-License-Identifier: Apache-2.0

ARG base_IMAGE_TAG
ARG CMAKE_BUILD_TYPE
ARG NPROC

FROM $base_IMAGE_TAG

ARG CMAKE_BUILD_TYPE
ARG NPROC

WORKDIR $HOME
COPY --chown=${UID}:${GID} abseil-cpp abseil-cpp
WORKDIR $HOME/abseil-cpp
RUN nice cmake -DCMAKE_CXX_STANDARD=17 \
  -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE} \
  -DCMAKE_INSTALL_PREFIX:PATH=$HOME/install . && \
  nice make all install -j${NPROC:-3}
